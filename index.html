<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="style.css">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Single+Day&display=swap" rel="stylesheet">


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>우리... 할 수 있죠</title>

    <script type="module">
        // Firebase SDK 라이브러리 가져오기
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
        import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDh6zLnyROVOfCWvNFUc7ZuA8vwcfetQfg",
            authDomain: "sparta-c733d.firebaseapp.com",
            projectId: "sparta-c733d",
            storageBucket: "sparta-c733d.appspot.com",
            messagingSenderId: "1031155272900",
            appId: "1:1031155272900:web:cb870f935defdb8088cd91",
            measurementId: "G-E2LVXM0BPR"
        };

        // Firebase 인스턴스 초기화
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);





        let docs = await getDocs(collection(db, "team_member"));
        docs.forEach((doc) => {
            let row = doc.data();
            let memberBio = row['memberBio'];
            let memberBlog = row['memberBlog'];
            let memberGithub = row['memberGithub'];
            let memberHobby = row['memberHobby'];
            let memberImage = row['memberImage'];
            let memberIntro = row['memberIntro'];
            let memberMbti = row['memberMbti'];
            let memberName = row['memberName'];
            let memberNickname = row['memberNickname'];
            let memberPos1 = row['memberPos1'];
            let memberPos2 = row['memberPos2'];
            let memberPos3 = row['memberPos3'];
            let memberStyle = row['memberStyle'];

            let temp_html = `
            <div class="card">
                    <div class="card-content">
                        <div class="image">
                            <div class="">
                                <img src="${memberImage}" alt="Person 1">
                            </div>
                        </div>
                        <div class="media-icons">
                            <a href="${memberBlog}"><i class="fa-solid fa-blog blog-icon"></i></a>
                            <a href="${memberGithub}"><i
                                    class="fa-brands fa-github github-icon"></i></a>

                        </div>
                        <div class="name-profession">
                            <span class="name">이름 : ${memberName}</span>
                            <span class="tendency">MBTI : ${memberMbti}</span>
                            <span class="promise">한 줄 다짐 : "${memberBio}"</span>
                            <button id="${memberNickname}" class="aboutMe">상세 정보</button>
                        </div>
                    </div>
                </div>
            `;
            $('#member').append(temp_html);
        });

        $(document).ready(function () {
            $("#header").load("header.html");
        });

        $(document).on("click", "#guestBookBtn", function () {
            window.location.href = "guest_book.html";
        });

        $(".aboutMe").click(async function () {
            $('html, body').animate({
                scrollTop: $(document).height() 
            }, 'slow');
            
            let memberId = $(this).attr('id');
            let memberBio = '';
            let memberHobby = '';

            let memberIntro = '';
            let memberMbti = '';
            let memberName = '';
            let memberNickname = '';
            let memberPos1 = '';
            let memberPos2 = '';
            let memberPos3 = '';
            let memberStyle = '';
            docs.forEach(doc => {
                let row = doc.data();
                if (memberId == row['memberNickname']) {
                    memberBio = row['memberBio'];
                    memberHobby = row['memberHobby'];
                    memberIntro = row['memberIntro'];
                    memberMbti = row['memberMbti'];
                    memberName = row['memberName'];
                    memberNickname = row['memberNickname'];
                    memberPos1 = row['memberPos1'];
                    memberPos2 = row['memberPos2'];
                    memberPos3 = row['memberPos3'];
                    memberStyle = row['memberStyle'];
                }
            });
            $("#member-detail").empty();
            let temp_html = `
                    <div>
                <h2>상세 정보</h2>
                <p><strong>닉네임:</strong> ${memberNickname}</p>
                <p><strong>자기소개:</strong> ${memberIntro}</p>
                <p><strong>취미:</strong> ${memberHobby}</p>
                <p><strong>자신의 장점:</strong>
                    <ul>
                        <li>${memberPos1}</li>
                        <li>${memberPos2}</li>
                        <li>${memberPos3}</li>
                    </ul>
                </p>
                <p><strong>맴버 스타일:</strong> ${memberStyle}</p>
                </div>
                    
                    `;
            $('#member-detail').append(temp_html);

        })
    </script>

</head>

<body>
    <div id="header"></div>

    <div class="notice-container">
        <div class="notice">
            <h2 class="notice-title">중요 공지</h2>
            <p class="notice-content">이번 주 휴무 안내: 본사는 금요일에만 열고, 토요일과 일요일은 휴무입니다. 감사합니다.</p>
        </div>

        <div class="notice">
            <h2 class="notice-title">중요 공지</h2>
            <p class="notice-content">이번 주 휴무 안내: 본사는 금요일에만 열고, 토요일과 일요일은 휴무입니다. 감사합니다.</p>
        </div>
    </div>


    <section>
        <div class="container">
            <div id="member" class="content">
            </div>
    </section>
    <div>
        <div id="member-detail">

        </div>
    </div>


</body>

</html>